global_defs {
    router_id LVS_HAPROXY   # identifiant générique, à personnaliser par instance
}

vrrp_instance VI_1 {
    state BACKUP             # par défaut BACKUP, l’actif changera en fonction de la priorité
    interface eth0           # interface réseau, à adapter sur l’instance finale
    virtual_router_id 51     # identifiant VRRP, doit être le même sur tous les HAProxy
    priority 100             # priorité générique, à ajuster par instance (ex: 150 pour primaire)
    advert_int 1             # intervalle des annonces VRRP en secondes
    authentication {
        auth_type PASS
        auth_pass 42Secure   # mot de passe générique, à changer pour production
    }
    virtual_ipaddress {
        # VIP à ajouter dans les instances finales
        # 10.0.0.100/24
    }

    # Script de health check optionnel, à définir plus tard
    # track_script {
    #     chk_haproxy
    # }
}

# Script de health check générique, à activer plus tard
# vrrp_script chk_haproxy {
#     script "/usr/local/bin/check_haproxy.sh"
#     interval 2
#     weight -20
# }
